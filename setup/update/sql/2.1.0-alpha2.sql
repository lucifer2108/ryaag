SET FOREIGN_KEY_CHECKS = 0;

UPDATE `config` SET `value`='2.1.0-alpha2' WHERE `name`='thelia_version';
UPDATE `config` SET `value`='1' WHERE `name`='thelia_minus_version';
UPDATE `config` SET `value`='0' WHERE `name`='thelia_release_version';
UPDATE `config` SET `value`='alpha2' WHERE `name`='thelia_extra_version';

UPDATE `config` SET `name`='form_firewall_active' WHERE `name`='from_firewall_active';

SELECT @max_id := IFNULL(MAX(`id`),0) FROM `config`;

INSERT INTO `config` (`id`, `name`, `value`, `secured`, `hidden`, `created_at`, `updated_at`) VALUES
(@max_id + 1, 'cart.use_persistent_cookie', '1', 0, 0, NOW(), NOW()),
(@max_id + 2, 'cart.cookie_name', 'thelia_cart', 0, 0, NOW(), NOW()),
(@max_id + 3, 'cart.cookie_lifetime', '31536060', 0, 0, NOW(), NOW()),
(@max_id + 4, 'allow_slash_ended_uri', 1, 0, 0, NOW(), NOW())
;


INSERT INTO `config_i18n` (`id`, `locale`, `title`, `description`, `chapo`, `postscriptum`) VALUES
(@max_id + 1, 'ar_SA', NULL, NULL, NULL, NULL),
(@max_id + 2, 'ar_SA', NULL, NULL, NULL, NULL),
(@max_id + 3, 'ar_SA', NULL, NULL, NULL, NULL),
(@max_id + 4, 'ar_SA', NULL, NULL, NULL, NULL),
(@max_id + 1, 'cs_CZ', NULL, NULL, NULL, NULL),
(@max_id + 2, 'cs_CZ', NULL, NULL, NULL, NULL),
(@max_id + 3, 'cs_CZ', NULL, NULL, NULL, NULL),
(@max_id + 4, 'cs_CZ', NULL, NULL, NULL, NULL),
(@max_id + 1, 'de_DE', 'Ein dauerhaftes Cookie verwenden, um den Kundes-Warenkorb zu merken', NULL, NULL, NULL),
(@max_id + 2, 'de_DE', 'Name der Warenkorb-Cookie', NULL, NULL, NULL),
(@max_id + 3, 'de_DE', 'Dauer der Warenkorb-Cookie in dem Kunden-Browser, in Sekunden', NULL, NULL, NULL),
(@max_id + 4, 'de_DE', 'URI mit Slash beendet erlauben', NULL, NULL, NULL),
(@max_id + 1, 'el_GR', NULL, NULL, NULL, NULL),
(@max_id + 2, 'el_GR', NULL, NULL, NULL, NULL),
(@max_id + 3, 'el_GR', NULL, NULL, NULL, NULL),
(@max_id + 4, 'el_GR', NULL, NULL, NULL, NULL),
(@max_id + 1, 'en_US', 'Use a persistent cookie to keep track of customer cart', NULL, NULL, NULL),
(@max_id + 2, 'en_US', 'Name the cart cookie', NULL, NULL, NULL),
(@max_id + 3, 'en_US', 'Life time of the cart cookie in the customer browser, in seconds', NULL, NULL, NULL),
(@max_id + 4, 'en_US', 'Allow slash ended uri', NULL, NULL, NULL),
(@max_id + 1, 'es_ES', 'Usa una \'cookie\' persistente para mantener el trayecto del carrito del cliente', NULL, NULL, NULL),
(@max_id + 2, 'es_ES', 'Nombre la cookie de carrito', NULL, NULL, NULL),
(@max_id + 3, 'es_ES', 'Tiempo de vida de la cookie del carro en el navegador del cliente, en segundos', NULL, NULL, NULL),
(@max_id + 4, 'es_ES', 'Permitir barra de fín de url', NULL, NULL, NULL),
(@max_id + 1, 'fa_IR', 'استفاده از کوکی ماندگار برای پیگیری سبد خرید مشتریان', NULL, NULL, NULL),
(@max_id + 2, 'fa_IR', NULL, NULL, NULL, NULL),
(@max_id + 3, 'fa_IR', NULL, NULL, NULL, NULL),
(@max_id + 4, 'fa_IR', NULL, NULL, NULL, NULL),
(@max_id + 1, 'fr_FR', 'Utiliser un cookie persistant pour mémoriser le panier du client', NULL, NULL, NULL),
(@max_id + 2, 'fr_FR', 'Nom du cookie pour le panier', NULL, NULL, NULL),
(@max_id + 3, 'fr_FR', 'Durée de vie du cookie du panier dans le navigateur du client, en secondes', NULL, NULL, NULL),
(@max_id + 4, 'fr_FR', 'Autoriser les URI terminées par un slash', NULL, NULL, NULL),
(@max_id + 1, 'hu_HU', NULL, NULL, NULL, NULL),
(@max_id + 2, 'hu_HU', NULL, NULL, NULL, NULL),
(@max_id + 3, 'hu_HU', NULL, NULL, NULL, NULL),
(@max_id + 4, 'hu_HU', NULL, NULL, NULL, NULL),
(@max_id + 1, 'id_ID', NULL, NULL, NULL, NULL),
(@max_id + 2, 'id_ID', NULL, NULL, NULL, NULL),
(@max_id + 3, 'id_ID', NULL, NULL, NULL, NULL),
(@max_id + 4, 'id_ID', NULL, NULL, NULL, NULL),
(@max_id + 1, 'it_IT', NULL, NULL, NULL, NULL),
(@max_id + 2, 'it_IT', NULL, NULL, NULL, NULL),
(@max_id + 3, 'it_IT', NULL, NULL, NULL, NULL),
(@max_id + 4, 'it_IT', NULL, NULL, NULL, NULL),
(@max_id + 1, 'pl_PL', NULL, NULL, NULL, NULL),
(@max_id + 2, 'pl_PL', 'Nazwa ciastka koszyka', NULL, NULL, NULL),
(@max_id + 3, 'pl_PL', NULL, NULL, NULL, NULL),
(@max_id + 4, 'pl_PL', 'Ukośnik na końcu adresu uri', NULL, NULL, NULL),
(@max_id + 1, 'pt_BR', NULL, NULL, NULL, NULL),
(@max_id + 2, 'pt_BR', NULL, NULL, NULL, NULL),
(@max_id + 3, 'pt_BR', NULL, NULL, NULL, NULL),
(@max_id + 4, 'pt_BR', NULL, NULL, NULL, NULL),
(@max_id + 1, 'pt_PT', NULL, NULL, NULL, NULL),
(@max_id + 2, 'pt_PT', NULL, NULL, NULL, NULL),
(@max_id + 3, 'pt_PT', NULL, NULL, NULL, NULL),
(@max_id + 4, 'pt_PT', NULL, NULL, NULL, NULL),
(@max_id + 1, 'ru_RU', 'Использовать cookie для отслеживания корзины клиента', NULL, NULL, NULL),
(@max_id + 2, 'ru_RU', 'Имя cookie корзины', NULL, NULL, NULL),
(@max_id + 3, 'ru_RU', 'Время жизни cookie корзины в секундах', NULL, NULL, NULL),
(@max_id + 4, 'ru_RU', 'Разрешить URI закрывающим слешем', NULL, NULL, NULL),
(@max_id + 1, 'sk_SK', NULL, NULL, NULL, NULL),
(@max_id + 2, 'sk_SK', NULL, NULL, NULL, NULL),
(@max_id + 3, 'sk_SK', NULL, NULL, NULL, NULL),
(@max_id + 4, 'sk_SK', NULL, NULL, NULL, NULL),
(@max_id + 1, 'tr_TR', 'Müşteri sepeti izlemek için kalıcı bir tanımlama bilgisi kullanın', NULL, NULL, NULL),
(@max_id + 2, 'tr_TR', 'Adı sepeti tanımlama bilgisi', NULL, NULL, NULL),
(@max_id + 3, 'tr_TR', 'Müşteri tarayıcı sepeti çerezde yaşam süresi saniye içinde', NULL, NULL, NULL),
(@max_id + 4, 'tr_TR', 'Eğik çizgi sona erdi URI izin', NULL, NULL, NULL),
(@max_id + 1, 'uk_UA', NULL, NULL, NULL, NULL),
(@max_id + 2, 'uk_UA', NULL, NULL, NULL, NULL),
(@max_id + 3, 'uk_UA', NULL, NULL, NULL, NULL),
(@max_id + 4, 'uk_UA', NULL, NULL, NULL, NULL)
;

DELETE FROM `config` WHERE `name`='currency_rate_update_url';

SELECT @max_id := IFNULL(MAX(`id`),0) FROM `hook`;

INSERT INTO `hook` (`id`, `code`, `type`, `by_module`, `block`, `native`, `activate`, `position`, `created_at`, `updated_at`) VALUES
  (@max_id+1, 'order-edit.cart-top', 2, 0, 0, 1, 1, 1, NOW(), NOW()),
  (@max_id+2, 'order-edit.cart-bottom', 2, 0, 0, 1, 1, 1, NOW(), NOW()),
  (@max_id+3, 'order-edit.bill-top', 2, 0, 0, 1, 1, 1, NOW(), NOW()),
  (@max_id+4, 'order-edit.bill-bottom', 2, 0, 0, 1, 1, 1, NOW(), NOW()),
  (@max_id+5, 'order-edit.before-order-product-list', 2, 0, 0, 1, 1, 1, NOW(), NOW()),
  (@max_id+6, 'order-edit.before-order-product-row', 2, 0, 0, 1, 1, 1, NOW(), NOW()),
  (@max_id+7, 'order-edit.after-order-product-row', 2, 0, 0, 1, 1, 1, NOW(), NOW()),
  (@max_id+8, 'order-edit.after-order-product-list', 2, 0, 0, 1, 1, 1, NOW(), NOW()),
  (@max_id+9, 'sales.top', 2, 0, 0, 1, 1, 1, NOW(), NOW()),
  (@max_id+10, 'sales.table-header', 2, 0, 0, 1, 1, 1, NOW(), NOW()),
  (@max_id+11, 'sales.table-row', 2, 0, 0, 1, 1, 1, NOW(), NOW()),
  (@max_id+12, 'sales.bottom', 2, 0, 0, 1, 1, 1, NOW(), NOW()),
  (@max_id+13, 'sale.create-form', 2, 0, 0, 1, 1, 1, NOW(), NOW()),
  (@max_id+14, 'sale.delete-form', 2, 0, 0, 1, 1, 1, NOW(), NOW()),
  (@max_id+15, 'sales.js', 2, 0, 0, 1, 1, 1, NOW(), NOW()),
  (@max_id+16, 'product.combinations-row', 2, 0, 1, 1, 1, 1, NOW(), NOW()),
  (@max_id+17, 'main.before-content', 2, 0, 0, 1, 1, 1, NOW(), NOW()),
  (@max_id+18, 'main.after-content', 2, 0, 0, 1, 1, 1, NOW(), NOW())
;

INSERT INTO  `hook_i18n` (`id`, `locale`, `title`, `description`, `chapo`) VALUES
  (@max_id+1, 'ar_SA', NULL, '', ''),
  (@max_id+2, 'ar_SA', NULL, '', ''),
  (@max_id+3, 'ar_SA', NULL, '', ''),
  (@max_id+4, 'ar_SA', NULL, '', ''),
  (@max_id+5, 'ar_SA', NULL, '', ''),
  (@max_id+6, 'ar_SA', NULL, '', ''),
  (@max_id+7, 'ar_SA', NULL, '', ''),
  (@max_id+8, 'ar_SA', NULL, '', ''),
  (@max_id+9, 'ar_SA', NULL, '', ''),
  (@max_id+10, 'ar_SA', NULL, '', ''),
  (@max_id+11, 'ar_SA', NULL, '', ''),
  (@max_id+12, 'ar_SA', NULL, '', ''),
  (@max_id+13, 'ar_SA', NULL, '', ''),
  (@max_id+14, 'ar_SA', NULL, '', ''),
  (@max_id+15, 'ar_SA', NULL, '', ''),
  (@max_id+16, 'ar_SA', NULL, '', ''),
  (@max_id+17, 'ar_SA', NULL, '', ''),
  (@max_id+18, 'ar_SA', NULL, '', ''),
  (@max_id+1, 'cs_CZ', NULL, '', ''),
  (@max_id+2, 'cs_CZ', NULL, '', ''),
  (@max_id+3, 'cs_CZ', NULL, '', ''),
  (@max_id+4, 'cs_CZ', NULL, '', ''),
  (@max_id+5, 'cs_CZ', NULL, '', ''),
  (@max_id+6, 'cs_CZ', NULL, '', ''),
  (@max_id+7, 'cs_CZ', NULL, '', ''),
  (@max_id+8, 'cs_CZ', NULL, '', ''),
  (@max_id+9, 'cs_CZ', NULL, '', ''),
  (@max_id+10, 'cs_CZ', NULL, '', ''),
  (@max_id+11, 'cs_CZ', NULL, '', ''),
  (@max_id+12, 'cs_CZ', NULL, '', ''),
  (@max_id+13, 'cs_CZ', NULL, '', ''),
  (@max_id+14, 'cs_CZ', NULL, '', ''),
  (@max_id+15, 'cs_CZ', NULL, '', ''),
  (@max_id+16, 'cs_CZ', NULL, '', ''),
  (@max_id+17, 'cs_CZ', NULL, '', ''),
  (@max_id+18, 'cs_CZ', NULL, '', ''),
  (@max_id+1, 'de_DE', 'Bestellung - Warenkorb oben', '', ''),
  (@max_id+2, 'de_DE', 'Bestellung - Warenkorb unten', '', ''),
  (@max_id+3, 'de_DE', 'Bestellung - Rechnung oben', '', ''),
  (@max_id+4, 'de_DE', 'Bestellung - Rechnung unten', '', ''),
  (@max_id+5, 'de_DE', 'Bestellung - Vor der Produktliste', '', ''),
  (@max_id+6, 'de_DE', 'Bestellung - Vor der Öffnung der Produktzeile', '', ''),
  (@max_id+7, 'de_DE', 'Bestellung - Nach Sperrung der Produkt Zeile', '', ''),
  (@max_id+8, 'de_DE', 'Bestellung - Nach der Produktliste', '', ''),
  (@max_id+9, 'de_DE', 'Sonderangebote - oben', '', ''),
  (@max_id+10, 'de_DE', 'Sonderangebote - Tabellenkopf', '', ''),
  (@max_id+11, 'de_DE', 'Sonderangebote - Tabellenzeile', '', ''),
  (@max_id+12, 'de_DE', 'Sonderangebote - unten', '', ''),
  (@max_id+13, 'de_DE', 'Sonderangebot - Erstellungsformular', '', ''),
  (@max_id+14, 'de_DE', 'Sonderangebot - Löschungsformular', '', ''),
  (@max_id+15, 'de_DE', 'Sonderangebote - JavaScript', '', ''),
  (@max_id+16, 'de_DE', 'Produkt - unten einer Produkt-Kombination', '', ''),
  (@max_id+17, 'de_DE', 'Layout - vor dem Hauptinhaltsbereich', '', ''),
  (@max_id+18, 'de_DE', 'Admin layout - Nach dem Hauptinhalt', '', ''),
  (@max_id+1, 'el_GR', NULL, '', ''),
  (@max_id+2, 'el_GR', NULL, '', ''),
  (@max_id+3, 'el_GR', NULL, '', ''),
  (@max_id+4, 'el_GR', NULL, '', ''),
  (@max_id+5, 'el_GR', NULL, '', ''),
  (@max_id+6, 'el_GR', NULL, '', ''),
  (@max_id+7, 'el_GR', NULL, '', ''),
  (@max_id+8, 'el_GR', NULL, '', ''),
  (@max_id+9, 'el_GR', NULL, '', ''),
  (@max_id+10, 'el_GR', NULL, '', ''),
  (@max_id+11, 'el_GR', NULL, '', ''),
  (@max_id+12, 'el_GR', NULL, '', ''),
  (@max_id+13, 'el_GR', NULL, '', ''),
  (@max_id+14, 'el_GR', NULL, '', ''),
  (@max_id+15, 'el_GR', NULL, '', ''),
  (@max_id+16, 'el_GR', NULL, '', ''),
  (@max_id+17, 'el_GR', NULL, '', ''),
  (@max_id+18, 'el_GR', NULL, '', ''),
  (@max_id+1, 'en_US', 'Order - cart top', '', ''),
  (@max_id+2, 'en_US', 'Order - cart bottom', '', ''),
  (@max_id+3, 'en_US', 'Order - bill top', '', ''),
  (@max_id+4, 'en_US', 'Order - bill bottom', '', ''),
  (@max_id+5, 'en_US', 'Order - Before product list', '', ''),
  (@max_id+6, 'en_US', 'Order - Before starting product row', '', ''),
  (@max_id+7, 'en_US', 'Order - After closing product row', '', ''),
  (@max_id+8, 'en_US', 'Order - After product list', '', ''),
  (@max_id+9, 'en_US', 'Sales - at the top', '', ''),
  (@max_id+10, 'en_US', 'Sales - table header', '', ''),
  (@max_id+11, 'en_US', 'Sales - table row', '', ''),
  (@max_id+12, 'en_US', 'Sales - at the bottom', '', ''),
  (@max_id+13, 'en_US', 'Sale - create form', '', ''),
  (@max_id+14, 'en_US', 'Sale - delete form', '', ''),
  (@max_id+15, 'en_US', 'Sales - JavaScript', '', ''),
  (@max_id+16, 'en_US', 'Product - at the bottom of a product combination', '', ''),
  (@max_id+17, 'en_US', 'Layout - Before the main content', '', ''),
  (@max_id+18, 'en_US', 'Admin layout - After the main content', '', ''),
  (@max_id+1, 'es_ES', 'Orden - parte superior del carro', '', ''),
  (@max_id+2, 'es_ES', 'Orden - parte inferior del carro', '', ''),
  (@max_id+3, 'es_ES', 'Orden - parte superior de la cuenta', '', ''),
  (@max_id+4, 'es_ES', 'Orden - parte inferior de la cuenta', '', ''),
  (@max_id+5, 'es_ES', 'Orden - antes de la lista de productos', '', ''),
  (@max_id+6, 'es_ES', 'Orden - antes de comenzar la fila de producto', '', ''),
  (@max_id+7, 'es_ES', 'Orden - después de cerrar la fila de producto', '', ''),
  (@max_id+8, 'es_ES', 'Orden - después de la lista de productos', '', ''),
  (@max_id+9, 'es_ES', 'Ventas - en la parte superior', '', ''),
  (@max_id+10, 'es_ES', 'Ventas - encabezado de tabla', '', ''),
  (@max_id+11, 'es_ES', 'Ventas - fila de la tabla', '', ''),
  (@max_id+12, 'es_ES', 'Ventas - en la parte inferior', '', ''),
  (@max_id+13, 'es_ES', 'Venta - formulario de creación', '', ''),
  (@max_id+14, 'es_ES', 'Venta - formulario de borrado', '', ''),
  (@max_id+15, 'es_ES', 'Ventas - JavaScript', '', ''),
  (@max_id+16, 'es_ES', 'Producto - al pie de la combinación de un producto', '', ''),
  (@max_id+17, 'es_ES', 'Diseño - antes el contenido principal', '', ''),
  (@max_id+18, 'es_ES', 'Diseño de administración - Después del contenido principal', '', ''),
  (@max_id+1, 'fa_IR', NULL, '', ''),
  (@max_id+2, 'fa_IR', NULL, '', ''),
  (@max_id+3, 'fa_IR', NULL, '', ''),
  (@max_id+4, 'fa_IR', NULL, '', ''),
  (@max_id+5, 'fa_IR', NULL, '', ''),
  (@max_id+6, 'fa_IR', NULL, '', ''),
  (@max_id+7, 'fa_IR', NULL, '', ''),
  (@max_id+8, 'fa_IR', NULL, '', ''),
  (@max_id+9, 'fa_IR', NULL, '', ''),
  (@max_id+10, 'fa_IR', NULL, '', ''),
  (@max_id+11, 'fa_IR', NULL, '', ''),
  (@max_id+12, 'fa_IR', NULL, '', ''),
  (@max_id+13, 'fa_IR', NULL, '', ''),
  (@max_id+14, 'fa_IR', NULL, '', ''),
  (@max_id+15, 'fa_IR', NULL, '', ''),
  (@max_id+16, 'fa_IR', NULL, '', ''),
  (@max_id+17, 'fa_IR', NULL, '', ''),
  (@max_id+18, 'fa_IR', NULL, '', ''),
  (@max_id+1, 'fr_FR', 'Commande - panier haut', '', ''),
  (@max_id+2, 'fr_FR', 'Commande - panier bas', '', ''),
  (@max_id+3, 'fr_FR', 'Commande - facture haut', '', ''),
  (@max_id+4, 'fr_FR', 'Commande - facture bas', '', ''),
  (@max_id+5, 'fr_FR', 'Commande - Avant la liste des produits', '', ''),
  (@max_id+6, 'fr_FR', 'Commande - Avant d\'ouvrir la ligne produit', '', ''),
  (@max_id+7, 'fr_FR', 'Commande - Après avoir fermé la ligne produit', '', ''),
  (@max_id+8, 'fr_FR', 'Commande - Après la liste des produits', '', ''),
  (@max_id+9, 'fr_FR', 'Promotions - en haut', '', ''),
  (@max_id+10, 'fr_FR', 'Promotions - colonne tableau', '', ''),
  (@max_id+11, 'fr_FR', 'Promotions - ligne du tableau', '', ''),
  (@max_id+12, 'fr_FR', 'Promotions - en bas', '', ''),
  (@max_id+13, 'fr_FR', 'Promotion - formulaire de création', '', ''),
  (@max_id+14, 'fr_FR', 'Promotion - formulaire de suppression', '', ''),
  (@max_id+15, 'fr_FR', 'Promotions - JavaScript', '', ''),
  (@max_id+16, 'fr_FR', 'Produit - en bas d\'une combinaison de déclinaisons', '', ''),
  (@max_id+17, 'fr_FR', 'Layout - Avant le contenu principal', '', ''),
  (@max_id+18, 'fr_FR', 'Admin layout - Après le contenu principal', '', ''),
  (@max_id+1, 'hu_HU', NULL, '', ''),
  (@max_id+2, 'hu_HU', NULL, '', ''),
  (@max_id+3, 'hu_HU', NULL, '', ''),
  (@max_id+4, 'hu_HU', NULL, '', ''),
  (@max_id+5, 'hu_HU', NULL, '', ''),
  (@max_id+6, 'hu_HU', NULL, '', ''),
  (@max_id+7, 'hu_HU', NULL, '', ''),
  (@max_id+8, 'hu_HU', NULL, '', ''),
  (@max_id+9, 'hu_HU', NULL, '', ''),
  (@max_id+10, 'hu_HU', NULL, '', ''),
  (@max_id+11, 'hu_HU', NULL, '', ''),
  (@max_id+12, 'hu_HU', NULL, '', ''),
  (@max_id+13, 'hu_HU', NULL, '', ''),
  (@max_id+14, 'hu_HU', NULL, '', ''),
  (@max_id+15, 'hu_HU', NULL, '', ''),
  (@max_id+16, 'hu_HU', NULL, '', ''),
  (@max_id+17, 'hu_HU', NULL, '', ''),
  (@max_id+18, 'hu_HU', NULL, '', ''),
  (@max_id+1, 'id_ID', NULL, '', ''),
  (@max_id+2, 'id_ID', NULL, '', ''),
  (@max_id+3, 'id_ID', NULL, '', ''),
  (@max_id+4, 'id_ID', NULL, '', ''),
  (@max_id+5, 'id_ID', NULL, '', ''),
  (@max_id+6, 'id_ID', NULL, '', ''),
  (@max_id+7, 'id_ID', NULL, '', ''),
  (@max_id+8, 'id_ID', NULL, '', ''),
  (@max_id+9, 'id_ID', NULL, '', ''),
  (@max_id+10, 'id_ID', NULL, '', ''),
  (@max_id+11, 'id_ID', NULL, '', ''),
  (@max_id+12, 'id_ID', NULL, '', ''),
  (@max_id+13, 'id_ID', NULL, '', ''),
  (@max_id+14, 'id_ID', NULL, '', ''),
  (@max_id+15, 'id_ID', NULL, '', ''),
  (@max_id+16, 'id_ID', NULL, '', ''),
  (@max_id+17, 'id_ID', NULL, '', ''),
  (@max_id+18, 'id_ID', 'Tata letak admin - setelah konten utama', '', ''),
  (@max_id+1, 'it_IT', NULL, '', ''),
  (@max_id+2, 'it_IT', NULL, '', ''),
  (@max_id+3, 'it_IT', NULL, '', ''),
  (@max_id+4, 'it_IT', NULL, '', ''),
  (@max_id+5, 'it_IT', NULL, '', ''),
  (@max_id+6, 'it_IT', NULL, '', ''),
  (@max_id+7, 'it_IT', NULL, '', ''),
  (@max_id+8, 'it_IT', NULL, '', ''),
  (@max_id+9, 'it_IT', NULL, '', ''),
  (@max_id+10, 'it_IT', NULL, '', ''),
  (@max_id+11, 'it_IT', NULL, '', ''),
  (@max_id+12, 'it_IT', NULL, '', ''),
  (@max_id+13, 'it_IT', NULL, '', ''),
  (@max_id+14, 'it_IT', NULL, '', ''),
  (@max_id+15, 'it_IT', NULL, '', ''),
  (@max_id+16, 'it_IT', NULL, '', ''),
  (@max_id+17, 'it_IT', NULL, '', ''),
  (@max_id+18, 'it_IT', NULL, '', ''),
  (@max_id+1, 'pl_PL', NULL, '', ''),
  (@max_id+2, 'pl_PL', NULL, '', ''),
  (@max_id+3, 'pl_PL', NULL, '', ''),
  (@max_id+4, 'pl_PL', NULL, '', ''),
  (@max_id+5, 'pl_PL', NULL, '', ''),
  (@max_id+6, 'pl_PL', NULL, '', ''),
  (@max_id+7, 'pl_PL', NULL, '', ''),
  (@max_id+8, 'pl_PL', NULL, '', ''),
  (@max_id+9, 'pl_PL', NULL, '', ''),
  (@max_id+10, 'pl_PL', NULL, '', ''),
  (@max_id+11, 'pl_PL', NULL, '', ''),
  (@max_id+12, 'pl_PL', NULL, '', ''),
  (@max_id+13, 'pl_PL', NULL, '', ''),
  (@max_id+14, 'pl_PL', NULL, '', ''),
  (@max_id+15, 'pl_PL', NULL, '', ''),
  (@max_id+16, 'pl_PL', NULL, '', ''),
  (@max_id+17, 'pl_PL', 'Układ - przed główną treścią', '', ''),
  (@max_id+18, 'pl_PL', 'Układ admin - Pod główną zawartością', '', ''),
  (@max_id+1, 'pt_BR', NULL, '', ''),
  (@max_id+2, 'pt_BR', NULL, '', ''),
  (@max_id+3, 'pt_BR', NULL, '', ''),
  (@max_id+4, 'pt_BR', NULL, '', ''),
  (@max_id+5, 'pt_BR', NULL, '', ''),
  (@max_id+6, 'pt_BR', NULL, '', ''),
  (@max_id+7, 'pt_BR', NULL, '', ''),
  (@max_id+8, 'pt_BR', NULL, '', ''),
  (@max_id+9, 'pt_BR', NULL, '', ''),
  (@max_id+10, 'pt_BR', NULL, '', ''),
  (@max_id+11, 'pt_BR', NULL, '', ''),
  (@max_id+12, 'pt_BR', NULL, '', ''),
  (@max_id+13, 'pt_BR', NULL, '', ''),
  (@max_id+14, 'pt_BR', NULL, '', ''),
  (@max_id+15, 'pt_BR', NULL, '', ''),
  (@max_id+16, 'pt_BR', NULL, '', ''),
  (@max_id+17, 'pt_BR', NULL, '', ''),
  (@max_id+18, 'pt_BR', NULL, '', ''),
  (@max_id+1, 'pt_PT', NULL, '', ''),
  (@max_id+2, 'pt_PT', NULL, '', ''),
  (@max_id+3, 'pt_PT', NULL, '', ''),
  (@max_id+4, 'pt_PT', NULL, '', ''),
  (@max_id+5, 'pt_PT', NULL, '', ''),
  (@max_id+6, 'pt_PT', NULL, '', ''),
  (@max_id+7, 'pt_PT', NULL, '', ''),
  (@max_id+8, 'pt_PT', NULL, '', ''),
  (@max_id+9, 'pt_PT', NULL, '', ''),
  (@max_id+10, 'pt_PT', NULL, '', ''),
  (@max_id+11, 'pt_PT', NULL, '', ''),
  (@max_id+12, 'pt_PT', NULL, '', ''),
  (@max_id+13, 'pt_PT', NULL, '', ''),
  (@max_id+14, 'pt_PT', NULL, '', ''),
  (@max_id+15, 'pt_PT', NULL, '', ''),
  (@max_id+16, 'pt_PT', NULL, '', ''),
  (@max_id+17, 'pt_PT', NULL, '', ''),
  (@max_id+18, 'pt_PT', NULL, '', ''),
  (@max_id+1, 'ru_RU', 'Заказ - верх корзины', '', ''),
  (@max_id+2, 'ru_RU', 'Заказ - низ корзины', '', ''),
  (@max_id+3, 'ru_RU', 'Заказ - верх оплаты', '', ''),
  (@max_id+4, 'ru_RU', 'Заказ - низ оплаты', '', ''),
  (@max_id+5, 'ru_RU', 'Заказ - Перед списком товаров', '', ''),
  (@max_id+6, 'ru_RU', 'Заказ - Перед строкой товара', '', ''),
  (@max_id+7, 'ru_RU', 'Заказ - После строки товара', '', ''),
  (@max_id+8, 'ru_RU', 'Заказ - После списка товаров', '', ''),
  (@max_id+9, 'ru_RU', 'Распродажи - вверху', '', ''),
  (@max_id+10, 'ru_RU', 'Распродажи - заголовок таблицы', '', ''),
  (@max_id+11, 'ru_RU', 'Распродажи - строка таблицы', '', ''),
  (@max_id+12, 'ru_RU', 'Распродажи - внизу', '', ''),
  (@max_id+13, 'ru_RU', 'Распродажа - форма создания', '', ''),
  (@max_id+14, 'ru_RU', 'Распродажа - форма удаления', '', ''),
  (@max_id+15, 'ru_RU', 'Распродажи - JavaScript', '', ''),
  (@max_id+16, 'ru_RU', 'Товар - внизу комбинации товара', '', ''),
  (@max_id+17, 'ru_RU', 'Каркас - Перед основным контентом', '', ''),
  (@max_id+18, 'ru_RU', 'Каркас админки - После основного контента', '', ''),
  (@max_id+1, 'sk_SK', 'Objednávka - košík top', '', ''),
  (@max_id+2, 'sk_SK', 'Objednávka - dno košíka', '', ''),
  (@max_id+3, 'sk_SK', NULL, '', ''),
  (@max_id+4, 'sk_SK', NULL, '', ''),
  (@max_id+5, 'sk_SK', NULL, '', ''),
  (@max_id+6, 'sk_SK', NULL, '', ''),
  (@max_id+7, 'sk_SK', NULL, '', ''),
  (@max_id+8, 'sk_SK', NULL, '', ''),
  (@max_id+9, 'sk_SK', NULL, '', ''),
  (@max_id+10, 'sk_SK', NULL, '', ''),
  (@max_id+11, 'sk_SK', NULL, '', ''),
  (@max_id+12, 'sk_SK', NULL, '', ''),
  (@max_id+13, 'sk_SK', NULL, '', ''),
  (@max_id+14, 'sk_SK', NULL, '', ''),
  (@max_id+15, 'sk_SK', NULL, '', ''),
  (@max_id+16, 'sk_SK', NULL, '', ''),
  (@max_id+17, 'sk_SK', NULL, '', ''),
  (@max_id+18, 'sk_SK', NULL, '', ''),
  (@max_id+1, 'tr_TR', 'Sipariş - sepeti üst', '', ''),
  (@max_id+2, 'tr_TR', 'Sipariş - sepeti alt', '', ''),
  (@max_id+3, 'tr_TR', 'Sipariş - bill üst', '', ''),
  (@max_id+4, 'tr_TR', 'Sipariş - bill alt', '', ''),
  (@max_id+5, 'tr_TR', 'Sipariş - önce ürün listesi', '', ''),
  (@max_id+6, 'tr_TR', 'Sipariş ürün satır başlamadan önce-', '', ''),
  (@max_id+7, 'tr_TR', 'Sipariş ürün satır kapattıktan sonra-', '', ''),
  (@max_id+8, 'tr_TR', 'Sipariş - sonra ürün listesi', '', ''),
  (@max_id+9, 'tr_TR', 'Satış - üst', '', ''),
  (@max_id+10, 'tr_TR', 'Satış - Tablo üstbilgisi', '', ''),
  (@max_id+11, 'tr_TR', 'Satış - tablo satırı', '', ''),
  (@max_id+12, 'tr_TR', 'Satış - alt', '', ''),
  (@max_id+13, 'tr_TR', 'Satılık - oluşturma formu', '', ''),
  (@max_id+14, 'tr_TR', 'Satılık - silme formu', '', ''),
  (@max_id+15, 'tr_TR', 'Satış - JavaScript', '', ''),
  (@max_id+16, 'tr_TR', 'Ürünler - ürün birleşimi dibinde', '', ''),
  (@max_id+17, 'tr_TR', 'Düzen - daha önce ana içerik', '', ''),
  (@max_id+18, 'tr_TR', 'Admin düzeni - sonra ana içerik', '', ''),
  (@max_id+1, 'uk_UA', NULL, '', ''),
  (@max_id+2, 'uk_UA', NULL, '', ''),
  (@max_id+3, 'uk_UA', NULL, '', ''),
  (@max_id+4, 'uk_UA', NULL, '', ''),
  (@max_id+5, 'uk_UA', NULL, '', ''),
  (@max_id+6, 'uk_UA', NULL, '', ''),
  (@max_id+7, 'uk_UA', NULL, '', ''),
  (@max_id+8, 'uk_UA', NULL, '', ''),
  (@max_id+9, 'uk_UA', NULL, '', ''),
  (@max_id+10, 'uk_UA', NULL, '', ''),
  (@max_id+11, 'uk_UA', NULL, '', ''),
  (@max_id+12, 'uk_UA', NULL, '', ''),
  (@max_id+13, 'uk_UA', NULL, '', ''),
  (@max_id+14, 'uk_UA', NULL, '', ''),
  (@max_id+15, 'uk_UA', NULL, '', ''),
  (@max_id+16, 'uk_UA', NULL, '', ''),
  (@max_id+17, 'uk_UA', NULL, '', ''),
  (@max_id+18, 'uk_UA', NULL, '', '')
;

# ======================================================================================================================
# Module version, min & max Thelia version supported
# ======================================================================================================================

ALTER TABLE `module`
  ADD COLUMN `category` VARCHAR(50) DEFAULT 'classic' NOT NULL
  AFTER `type`
;

UPDATE `module` SET `category` = 'classic' WHERE `type` = 1;
UPDATE `module` SET `category` = 'delivery' WHERE `type` = 2;
UPDATE `module` SET `category` = 'payment' WHERE `type` = 3;

ALTER TABLE `module`
  ADD COLUMN `version` VARCHAR(10) DEFAULT '' NOT NULL
  AFTER `code`
;

UPDATE `country` SET `isoalpha2` = 'BH' WHERE `isoalpha3` = 'BHR';
UPDATE `country` SET `isoalpha2` = 'MG' WHERE `isoalpha3` = 'MDG';


SELECT @max_id := IFNULL(MAX(`id`),0) FROM `module`;
SELECT @max_classic_position := IFNULL(MAX(`position`),0) FROM `module` WHERE `type`=1;


INSERT INTO `module` (`id`, `code`, `type`, `activate`, `position`, `full_namespace`, `created_at`, `updated_at`) VALUES
(@max_id+1, 'TheliaSmarty', 1, 1, @max_classic_position+1, 'TheliaSmarty\\TheliaSmarty', NOW(), NOW()),
(@max_id+2, 'VirtualProductControl', 1, 1, @max_classic_position+2, 'VirtualProductControl\\VirtualProductControl', NOW(), NOW())
;

INSERT INTO  `module_i18n` (`id`, `locale`, `title`, `description`, `chapo`, `postscriptum`) VALUES
(@max_id+1, 'ar_SA', NULL, NULL,  NULL,  NULL),
(@max_id+2, 'ar_SA', NULL, NULL,  NULL,  NULL),
(@max_id+1, 'cs_CZ', NULL, NULL,  NULL,  NULL),
(@max_id+2, 'cs_CZ', NULL, NULL,  NULL,  NULL),
(@max_id+1, 'de_DE', 'Smarty Template Engine Integration', NULL,  NULL,  NULL),
(@max_id+2, 'de_DE', 'Steuerung für virtuelle Produkte', 'Prüfen ob ein Liefermodul für virtuellen Produkte aktiviert ist,  wenn es mindestens ein virtuelles Produkt gibt',  NULL,  NULL),
(@max_id+1, 'el_GR', NULL, NULL,  NULL,  NULL),
(@max_id+2, 'el_GR', NULL, NULL,  NULL,  NULL),
(@max_id+1, 'en_US', 'Smarty template engine integration', NULL,  NULL,  NULL),
(@max_id+2, 'en_US', 'Virtual Product Controller', 'Check if a virtual product delivery module is enabled if at least one product is virtual',  NULL,  NULL),
(@max_id+1, 'es_ES', 'Integración del motor de plantillas Smarty', NULL,  NULL,  NULL),
(@max_id+2, 'es_ES', 'Controlador de producto virtual', 'Compruebe si un módulo de entrega de producto virtual está habilitado si es virtual por lo menos un producto',  NULL,  NULL),
(@max_id+1, 'fa_IR', NULL, NULL,  NULL,  NULL),
(@max_id+2, 'fa_IR', 'کنترل کننده محصولات مجازی', NULL,  NULL,  NULL),
(@max_id+1, 'fr_FR', 'Intégration du moteur de template Smarty', NULL,  NULL,  NULL),
(@max_id+2, 'fr_FR', 'Contôle de produit virtuel', 'Vérifie qu\'un module de livraison pour produit virtuel soit activé si des produits virtuels existent',  NULL,  NULL),
(@max_id+1, 'hu_HU', NULL, NULL,  NULL,  NULL),
(@max_id+2, 'hu_HU', NULL, NULL,  NULL,  NULL),
(@max_id+1, 'id_ID', NULL, NULL,  NULL,  NULL),
(@max_id+2, 'id_ID', NULL, NULL,  NULL,  NULL),
(@max_id+1, 'it_IT', NULL, NULL,  NULL,  NULL),
(@max_id+2, 'it_IT', NULL, NULL,  NULL,  NULL),
(@max_id+1, 'pl_PL', NULL, NULL,  NULL,  NULL),
(@max_id+2, 'pl_PL', NULL, NULL,  NULL,  NULL),
(@max_id+1, 'pt_BR', NULL, NULL,  NULL,  NULL),
(@max_id+2, 'pt_BR', NULL, NULL,  NULL,  NULL),
(@max_id+1, 'pt_PT', NULL, NULL,  NULL,  NULL),
(@max_id+2, 'pt_PT', NULL, NULL,  NULL,  NULL),
(@max_id+1, 'ru_RU', 'Интеграция шаблонизатора Smarty', NULL,  NULL,  NULL),
(@max_id+2, 'ru_RU', 'Поддержка виртуальных товаров', 'Проверять вкоючен ли модуль доставки виртуальных товаров, если хотя бы однин товар виртуальный',  NULL,  NULL),
(@max_id+1, 'sk_SK', NULL, NULL,  NULL,  NULL),
(@max_id+2, 'sk_SK', NULL, NULL,  NULL,  NULL),
(@max_id+1, 'tr_TR', 'Smarty şablon motoru entegrasyonu', NULL,  NULL,  NULL),
(@max_id+2, 'tr_TR', 'Sanal ürün denetleyicisi', 'En az bir ürün sanal ise bir sanal ürün teslim modülü etkin olup olmadığını denetleyin',  NULL,  NULL),
(@max_id+1, 'uk_UA', NULL, NULL,  NULL,  NULL),
(@max_id+2, 'uk_UA', NULL, NULL,  NULL,  NULL)
;

SET FOREIGN_KEY_CHECKS = 1;
