{extends file="layout.tpl"}

{* Body Class *}
{block name="body-class"}page-login{/block}

{* Breadcrumb *}
{block name='no-return-functions' append}
    {$breadcrumbs = [
        ['title' => {intl l="Login"}, 'url'=>{url path="/login"}]
    ]}
{/block}


{block name="main-content"}
<div class="main">
    <article class="col-main" aria-labelledby="main-label" role="main">
        <h1 class="page-header" id="main-label">{intl l="Login"}</h1>

        {form name="thelia.front.customer.login"}
        <form id="form-login" action="{url path="/login"}" method="post" {form_enctype form=$form} novalidate>
            {form_hidden_fields form=$form}

            {if $form_error}<div class="alert alert-danger">{$form_error_message}</div>{/if}

            {* the url the user is redirected to on login success *}
            {form_field form=$form field='success_url'}<input name="{$name}" type="hidden" value="{navigate to="return_to"}">{/form_field}
            {form_field form=$form field='error_message'}<input name="{$name}" type="hidden" value="{intl l="missing or invalid data"}">{/form_field}

            <fieldset>
                {form_field form=$form field="email"}
                <div class="form-group group-email{if $error} has-error{/if}">
                    <label for="{$label_attr.for}">{$label}</label>
                    <div class="control-input">
                        <input class="form-control" id="{$label_attr.for}" name="{$name}" type="email" value="{$value}" maxlength="255" {$attr} {if $required}aria-required="true" required{/if}{if !$value || $error} autofocus{/if}>
                        {if $error}<span class="help-block">{$message}</span>{assign var="error_focus" value="true"}
                        {elseif !$value}{assign var="error_focus" value="true"}{/if}
                    </div>
                </div><!-- /.form-group -->
                {/form_field}

                <fieldset>
                    {form_field form=$form field="account"}
                    <legend>{intl l="Do you have an account?"}</legend>
                    {foreach $choices as $choice}
                    <div class="radio radio-account{$choice->value}">
                        <label for="{$label_attr.for}{$choice->value}"><input id="{$label_attr.for}{$choice->value}" name="{$name}" data-toggle="password" type="radio" value="{$choice->value}"{if $value === {$choice->value}} checked{/if}> {$choice->label}</label>
                    </div>
                    {/foreach}
                    {/form_field}

                    {form_field form=$form field="password"}
                    <div class="form-group group-password{if $error} has-error{/if}">
                        <label class="sr-only" for="{$label_attr.for}">{$label}</label>
                        <div class="control-input">
                            <input class="form-control" id="{$label_attr.for}" name="{$name}" type="password" maxlength="255" autocomplete="off"{if !isset($error_focus)} autofocus{/if}>
                            {if $error}<span class="help-block">{$message}</span>{/if}
                        </div>
                    </div><!-- /.form-group -->
                    {/form_field}
                </fieldset>
            </fieldset>

            <div class="group-btn">
                <a class="forgot-password" data-toggle="confirmation" href="{url path="/password"}">{intl l="Forgot your Password?"}</a>
                <button class="btn btn-login" type="submit">{intl l="Next"}</button>
            </div><!-- /.group-btn -->
        </form>
        {/form}
    </article>
</div>
{/block}